

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started &mdash; PAW-Manual  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using GrimoireLab-native Features" href="grimoirelab.html" />
    <link rel="prev" title="Usage" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PAW-Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Intro</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-multi-mordred">Setting up Multi-mordred</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step-your-first-analysis-project">step-by-step: your first analysis project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#projects-json-defining-datasources">projects.json: defining datasources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conf-cfg-defining-project-pramaters">conf.cfg: defining project pramaters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#helloworld-py-adding-custom-scripting">helloWorld.py: adding custom scripting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-a-new-mordred-instance">Starting a new mordred instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accessing-results-via-graphql">accessing results via graphql</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="grimoirelab.html">Using GrimoireLab-native Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom%20scripts.html">Using Custom scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticWrap.html">Using ElasticWrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphql.html">Using the GraphQL-API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../technical/index.html">PAW Technical Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code/modules.html">ElasticWrap Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PAW-Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Usage</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h1>
<p>For ease of use, we have supplied a simple startup script to get a development instance of the PAW running. Simply run <code class="docutils literal notranslate"><span class="pre">start_paw_docker.sh</span></code> to start. In order to be able to retrieve <a class="reference internal" href="../technical/descriptive/multi-mordred.html"><span class="doc">Multi-Mordred</span></a> and <a class="reference internal" href="../technical/descriptive/elasticWrap.html"><span class="doc">ElasticWrap</span></a> you will be asked to supply a <a class="reference external" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">Github Authentication Token</a> and username. Make sure it has at least READ access to the <code class="docutils literal notranslate"><span class="pre">SIGmoirelabs/multi-mordred-wrapper</span></code> and <code class="docutils literal notranslate"><span class="pre">SIGmoirelabs/elasticwrap</span></code> repositories.
Additionally, you will need to generate a <a class="reference external" href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry">classic Authentication Token</a> to retrieve the <code class="docutils literal notranslate"><span class="pre">graphql_api</span></code> container. Once you have the token, run <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">'TOKEN'</span> <span class="pre">|</span> <span class="pre">docker</span> <span class="pre">login</span> <span class="pre">ghcr.io</span> <span class="pre">-u</span> <span class="pre">USERNAME</span> <span class="pre">--password-stdin</span></code></p>
<p>NOTE: The script will modify the following system values to make sure Redis and ElasticSearch are running properly:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vm.max_map_count=262144</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vm.overcommit_memory=1</span></code></p></li>
</ul>
<p>The script will automatically start the docker containers. If you want, you can set these values manually and simply go into the <code class="docutils literal notranslate"><span class="pre">deployment</span></code> folder and run <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code>.</p>
<p>It may take some time for all the containers to start. This is because we must ensure that <code class="docutils literal notranslate"><span class="pre">redis</span></code> and <code class="docutils literal notranslate"><span class="pre">mariadb</span></code> are running before we can properly start <code class="docutils literal notranslate"><span class="pre">sortinghat</span></code> and <code class="docutils literal notranslate"><span class="pre">multi-mordred</span></code>.</p>
<section id="setting-up-multi-mordred">
<h2>Setting up Multi-mordred<a class="headerlink" href="#setting-up-multi-mordred" title="Permalink to this heading">¶</a></h2>
<p>For a quickstart, you can create a <code class="docutils literal notranslate"><span class="pre">deployment/mordred_data</span></code> directory and move the <code class="docutils literal notranslate"><span class="pre">quickstart/setup.cfg</span></code> and <code class="docutils literal notranslate"><span class="pre">quickstart/projects.json</span></code> files into it. Then after the containers are all up, run <code class="docutils literal notranslate"><span class="pre">telnet</span> <span class="pre">localhost</span> <span class="pre">15555</span></code> and run the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new</span> <span class="n">demo</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">start</span> <span class="n">demo</span>
</pre></div>
</div>
<p>This will start a mordred instance which gets data from the projects defined in <code class="docutils literal notranslate"><span class="pre">projects.json</span></code> and enriches them. The raw data can be found in the <code class="docutils literal notranslate"><span class="pre">demo_git</span></code> index, whereas enriched data can be found in <code class="docutils literal notranslate"><span class="pre">demo_git_enriched</span></code>, <code class="docutils literal notranslate"><span class="pre">demo_git_enriched_aoc</span></code> and <code class="docutils literal notranslate"><span class="pre">demo_git_enriched_onion</span></code>.</p>
<p>Assuming you are using our example development docker-compose, you will now have 2 new directories in the <code class="docutils literal notranslate"><span class="pre">deployment</span></code> folder: <code class="docutils literal notranslate"><span class="pre">ES</span></code> and <code class="docutils literal notranslate"><span class="pre">mordred_data</span></code>. The <code class="docutils literal notranslate"><span class="pre">ES</span></code> folder simply stores all the ElasticSearch data and can be an easy way to delete data for testing purposes. The <code class="docutils literal notranslate"><span class="pre">mordred_data</span></code> folder is mounted in the <code class="docutils literal notranslate"><span class="pre">multi-mordred</span></code> container to <code class="docutils literal notranslate"><span class="pre">/data/</span></code>. Any files you want to provide to multi-mordred can be thrown in this folder.</p>
</section>
<section id="step-by-step-your-first-analysis-project">
<h2>step-by-step: your first analysis project<a class="headerlink" href="#step-by-step-your-first-analysis-project" title="Permalink to this heading">¶</a></h2>
<p>So now that we have the multi-mordred container up and running we can provide it with configuration files to create a copy of mordred and perform an analysis project.</p>
<section id="projects-json-defining-datasources">
<h3>projects.json: defining datasources<a class="headerlink" href="#projects-json-defining-datasources" title="Permalink to this heading">¶</a></h3>
<p>The projects.json file defines all the data that can be queried by this analysis project, divided by type. The specific type string indicates which percival retriever (or “backend”) will be used te retrieve the data. While most retrievers simply retrieve data from a specific source, i.e. git vs slack vs jira, some retrievers already do some degree of analysis, or are purpose-build for specific later analysis-scripts (the retrievers introduced by arthur and graal for instance).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="s2">&quot;SIGmoirelabs&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;ElasticWrap&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;git&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;https://github.com/SIGmoirelabs/elasticwrap.git&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="conf-cfg-defining-project-pramaters">
<h3>conf.cfg: defining project pramaters<a class="headerlink" href="#conf-cfg-defining-project-pramaters" title="Permalink to this heading">¶</a></h3>
<p>The second file any mordred clone will need is the a general configuration. This file will describe the locations of and credentials to external resources, as well as describing which tasks should be executed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">general</span><span class="p">]</span>
<span class="n">short_name</span> <span class="o">=</span> <span class="n">GrimoireLab</span>
<span class="n">update</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">min_update_delay</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">debug</span> <span class="o">=</span> <span class="n">false</span>
<span class="n">logs_dir</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sigmoire</span><span class="o">/</span><span class="n">logs</span>
<span class="n">bulk_size</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">scroll_size</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">aliases_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sigmoire</span><span class="o">/</span><span class="n">aliases</span><span class="o">.</span><span class="n">json</span>

<span class="p">[</span><span class="n">projects</span><span class="p">]</span>
<span class="n">projects_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">projects</span><span class="o">.</span><span class="n">json</span>

<span class="p">[</span><span class="n">es_collection</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">elasticsearch</span><span class="p">:</span><span class="mi">9200</span>

<span class="p">[</span><span class="n">es_enrichment</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">elasticsearch</span><span class="p">:</span><span class="mi">9200</span>
<span class="n">autorefresh</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>for more on configuration options see: <a class="reference internal" href="grimoirelab.html"><span class="doc">Using GrimoireLab-native Features</span></a> and <a class="reference external" href="https://github.com/chaoss/grimoirelab-sirmordred#setupcfg-">the official Mordred docs</a></p>
</section>
<section id="helloworld-py-adding-custom-scripting">
<h3>helloWorld.py: adding custom scripting<a class="headerlink" href="#helloworld-py-adding-custom-scripting" title="Permalink to this heading">¶</a></h3>
<p>One of the features added to multi-mordred over regular mordred is the ability to run arbitrary code as part of the data collection and processing pipeline. If the ‘custom’-phase is enabled in the .cfg file then a script can be specified which will be run after the build-in enrichment methods but before data visualization is configured.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">custom_script</span><span class="p">]</span>
<span class="n">scriptsource</span> <span class="o">=</span> <span class="n">enrich</span><span class="o">.</span><span class="n">py</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">]</span>
</pre></div>
</div>
<p>for more on this see: <a class="reference internal" href="custom%20scripts.html"><span class="doc">Using Custom scripts</span></a>.</p>
</section>
<section id="starting-a-new-mordred-instance">
<h3>Starting a new mordred instance<a class="headerlink" href="#starting-a-new-mordred-instance" title="Permalink to this heading">¶</a></h3>
<p>Now that all of the required files have been provided, we can call multi-mordred to start a new mordred intsance and run the specified analysis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ telnet localhost 15555
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
multimordred wrapper, type commands for a list of available commands
new demo /data/conf.cfg
Created demo
start demo
Started
</pre></div>
</div>
</section>
<section id="accessing-results-via-graphql">
<h3>accessing results via graphql<a class="headerlink" href="#accessing-results-via-graphql" title="Permalink to this heading">¶</a></h3>
<p>Kibiter may not play nice with customized enrichment however, so the main intended method for retrieving processed data from the PAW is through the graphql API. A querrying system intended to be usable without any programming. Go to ‘<a class="reference external" href="http://localhost:8081/graphql">http://localhost:8081/graphql</a>’ to see the interface.</p>
<p>for more on this see: <a class="reference internal" href="graphql.html"><span class="doc">Using the GraphQL-API</span></a>.</p>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="grimoirelab.html" class="btn btn-neutral float-right" title="Using GrimoireLab-native Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Aldi Doanta Kurnia, Bernard Johannes Willemsen, Nick Wolters, Rafael Dulfer, Tom Grooters.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>